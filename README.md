# mdoc

## README

本项目是一个相对规范化的将markdown文档转换成较为正式的pdf文档的工具，
其由一个shell脚本以及其运行需要的容器环境组成。

### 构建

```bash
cmake -B build
```

### 安装

#### 从源码

```bash
# 构建后
sudo cmake --install build
```

### 可用特性

#### CJK语义换行

默认语法为`markdown+east_asian_line_breaks`：

渲染前：

```markdown
CJK字符中间的换行会被忽略，
并不会被渲染成空格。
```

渲染结果：

> CJK字符中间的换行会被忽略，
> 并不会被渲染成空格。

#### PlantUML

可以直接绘制`plantuml`图：

渲染前：

````markdown
```plantuml {include="./asserts/alice-and-bob.plantuml"}
' 见./asserts/alice-and-bob.plantuml
```
````

`plantuml/alice-and-bob.plantuml`的文件内容为：
```plantuml {include="./asserts/alice-and-bob.plantuml" keep=true}
```

渲染结果：

> ```plantuml {include="./asserts/alice-and-bob.plantuml"}
> ' 见./asserts/alice-and-bob.plantuml
> ```

#### 引用代码

可以引用代码文件：

渲染前：

````markdown
```json {include="./asserts/hello.json"}
{"comment": "见./asserts/hello.json"}
```
````

渲染后：
```json {include="./asserts/hello.json"}
{"comment": "见./asserts/hello.json"}
```

#### 包含文件

可以引用其他markdown文件，
在引用其内容时可以调整其标题等级：

渲染前：

````markdown
```include {shift-heading-level-by=2}
./asserts/extras.md
```
````

extras.md的内容为：
```markdown {include="./asserts/extras.md"}
<!-- 见./asserts/extras.md -->
```

渲染结果：

> ```include {shift-heading-level-by=2}
> ./asserts/extras.md
> ```

### 样式预览

#### 列表

##### 有序列表

1. 列表

   1. 列表

      文本

1. 列表
   1. 列表
      1. 列表
1. 列表
   1. 列表

##### 无序列表

- 列表
  - 列表
- 列表
  - 列表
    - 列表
- 列表
  - 列表

#### 表格

|  表头  |  表头  |
|  ----  |  ----  |
| 单元格 | 单元格 |
| 单元格 | 单元格 |

##### 跨页单元格

使用gfm并不支持的其他pandoc语法拓展时可以将其使用以下代码块标注包裹起来，
这样并不会影响pandoc的渲染效果，
但是可以让该markdown文件在github上预览时获得一定程度的可读性：

````markdown
```pandoc_markdown
```
````

```pandoc_markdown
+------------------------------------+-----------------------------------------+
| 表头                               | 表头                                    |
+====================================+:========================================+
| 单元格                             | 单元格                                  |
|                                    +-----------------------------------------+
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
|                                    | - 单元格                                |
+------------------------------------+-----------------------------------------+
```

##### 跨页表格

|  表头  |  表头  |  表头  |  表头  |  表头  |  表头  |  表头  |
|  ----  |  ----  |  ----  |  ----  |  ----  |  ----  |  ----  |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |
| 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 | 单元格 |

#### 图片

![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)

#### 代码高亮

##### C

```c {include="./asserts/hello.c"}
// 见./asserts/hello.c
```

##### C++

```cpp {include="./asserts/hello.cpp"}
// 见./asserts/hello.cpp
```

##### Python

```python {include="./asserts/hello.py"}
# 见./asserts/hello.py
```

##### JSON

```json {include="./asserts/hello.json"}
{"comment": "见./asserts/hello.json"}
```

##### YAML
```yaml {include="./asserts/hello.yaml"}
# 见./asserts/hello.yaml
```

### 字形测试

本节用于测试各种文本中的简体中文字形是否正常。

渲染前：
````markdown
门
启
控
片
```
门
启
控
片
```
````
渲染后：

> 门
> 启
> 控
> 片
> ```
> 门
> 启
> 控
> 片
> ```
